# FineType v2 — Technology Domain Definitions
#
# Hierarchy: domain.category.type (locale is a field, not in the key)
# Full label at inference time: domain.category.type.LOCALE
#
# Each definition is a transformation contract:
#   - broad_type:     Target DuckDB type
#   - format_string:  DuckDB strptime format (null if not strptime-based)
#   - transform:      DuckDB SQL expression ({col} = column placeholder)
#   - transform_ext:  Enhanced transform requiring a DuckDB extension
#   - validation:     JSON Schema fragment for data quality checks
#   - tier:           Path from root to parent in the inference graph
#   - decompose:      Optional struct expansion for multi-field output
#
# Technology domain covers:
#   - network formats (IPv4, IPv6, URLs, etc.)
#   - cryptographic formats (UUIDs, hashes, tokens)
#   - code identifiers (ISBN, IMEI, EAN, etc.)
#   - development metadata (versions, licenses, programming languages)
#   - hardware specifications
# ─────────────────────────────────────────────────────────────────────

# ═════════════════════════════════════════════════════════════════════
# CATEGORY: internet
#
# Network addresses, URLs, and web-related formats. These are
# machine-readable identifiers for network resources and protocols.
# ═════════════════════════════════════════════════════════════════════

technology.internet.ip_v4:
  title: "IPv4 Address"
  description: >
    Standard 4-octet IPv4 address format (e.g., 192.168.1.1).
    Resolves to VARCHAR with INET validation. Can optionally
    parse to DuckDB INET type with the inet extension.
  designation: universal
  locales: [UNIVERSAL]
  broad_type: VARCHAR
  format_string: null
  transform: "CAST({col} AS VARCHAR)"
  transform_ext: "CAST({col} AS INET)"
  decompose: null
  validation:
    type: string
    pattern: "^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$"
  tier: [INET, internet]
  release_priority: 5
  aliases: [ipv4]
  samples:
    - "192.168.1.1"
    - "8.8.8.8"
    - "127.0.0.1"
    - "10.0.0.0"
  references: null
  notes: >
    v1 migration: Was internet.ip_v4. transform_ext uses DuckDB's inet extension
    if available. Without the extension, stored as VARCHAR but validated as IPv4.

technology.internet.ip_v4_with_port:
  title: "IPv4 Address with Port"
  description: >
    IPv4 address with port number separated by colon (e.g., 192.168.1.1:8080).
    Resolves to VARCHAR. Can decompose to separate IP and port fields.
  designation: universal
  locales: [UNIVERSAL]
  broad_type: VARCHAR
  format_string: null
  transform: "CAST({col} AS VARCHAR)"
  transform_ext: null
  decompose:
    ip: "REGEXP_EXTRACT({col}, '^([^:]+):')"
    port: "CAST(REGEXP_EXTRACT({col}, ':([0-9]+)$') AS SMALLINT)"
  validation:
    type: string
    pattern: "^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?):[0-9]{1,5}$"
  tier: [INET, internet]
  release_priority: 4
  aliases: [ipv4_port]
  samples:
    - "192.168.1.1:8080"
    - "10.0.0.1:3306"
    - "127.0.0.1:5432"
  references: null
  notes: >
    v1 migration: Was internet.ip_v4_with_port. Includes decompose to split
    address and port into separate columns during transformation.

technology.internet.ip_v6:
  title: "IPv6 Address"
  description: >
    Standard IPv6 address format with 8 16-bit hex groups separated by colons.
    May use :: notation for zero compression. Resolves to VARCHAR.
  designation: universal
  locales: [UNIVERSAL]
  broad_type: VARCHAR
  format_string: null
  transform: "CAST({col} AS VARCHAR)"
  transform_ext: "CAST({col} AS INET)"
  decompose: null
  validation:
    type: string
    pattern: "^([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}$"
  tier: [INET, internet]
  release_priority: 4
  aliases: [ipv6]
  samples:
    - "2001:0db8:85a3:0000:0000:8a2e:0370:7334"
    - "2001:db8:85a3::8a2e:370:7334"
    - "::1"
    - "fe80::1"
  references: null
  notes: >
    v1 migration: Was internet.ip_v6. Complex regex due to :: compression notation.

technology.internet.mac_address:
  title: "MAC Address"
  description: >
    Media Access Control (MAC) address in standard colon-separated hex format
    (e.g., 00:1a:2b:3c:4d:5e). Also accepts hyphen-separated format.
  designation: universal
  locales: [UNIVERSAL]
  broad_type: VARCHAR
  format_string: null
  transform: "CAST({col} AS VARCHAR)"
  transform_ext: null
  decompose: null
  validation:
    type: string
    pattern: "^([0-9A-Fa-f]{2}[:-]){5}([0-9A-Fa-f]{2})$"
  tier: [INET, internet]
  release_priority: 4
  aliases: [mac]
  samples:
    - "00:1a:2b:3c:4d:5e"
    - "08-00-27-00-00-00"
    - "a0:b1:c2:d3:e4:f5"
  references: null
  notes: >
    v1 migration: Was internet.mac_address. Pattern accepts both colon and hyphen
    separators. Data typically uppercase, but pattern is case-insensitive.

technology.internet.url:
  title: "URL"
  description: >
    Uniform Resource Locator (complete web address including scheme).
    Includes protocol (http, https, ftp, etc.), hostname, and optional path.
  designation: universal
  locales: [UNIVERSAL]
  broad_type: VARCHAR
  format_string: null
  transform: "CAST({col} AS VARCHAR)"
  transform_ext: null
  decompose:
    scheme: "REGEXP_EXTRACT({col}, '^([^:]+):')"
    hostname: "REGEXP_EXTRACT({col}, '(?:https?://)?([^/?]+)')"
    path: "REGEXP_EXTRACT({col}, '(?:https?://[^/]+)?(/.*)$')"
  validation:
    type: string
    pattern: "^(?:(?:https?|ftp|file)://)(?:[a-zA-Z0-9](?:[a-zA-Z0-9-]*[a-zA-Z0-9])?\\.)+[a-zA-Z0-9](?:[a-zA-Z0-9-]*[a-zA-Z0-9])?(?::\\d+)?(?:/[^?#]*)?(?:\\?[^#]*)?(?:#.*)?$"
  tier: [VARCHAR, internet]
  release_priority: 5
  aliases: [web_url]
  samples:
    - "https://example.com/path/to/resource"
    - "http://www.google.com"
    - "ftp://ftp.example.org/file.txt"
    - "https://example.com:8080/path?query=value#anchor"
  references: null
  notes: >
    v1 migration: Was internet.url. Includes optional decompose for parsing
    scheme, hostname, and path components.

technology.internet.uri:
  title: "URI"
  description: >
    Uniform Resource Identifier (more general than URL, includes URNs and other schemes).
    Pattern allows any valid scheme but does not require network protocol.
  designation: universal
  locales: [UNIVERSAL]
  broad_type: VARCHAR
  format_string: null
  transform: "CAST({col} AS VARCHAR)"
  transform_ext: null
  decompose: null
  validation:
    type: string
    pattern: "^[a-zA-Z][a-zA-Z0-9+\\-.]*:[^\\s]*$"
  tier: [VARCHAR, internet]
  release_priority: 4
  aliases: null
  samples:
    - "https://example.com/path"
    - "mailto:user@example.com"
    - "urn:isbn:0451450523"
    - "ftp://ftp.example.org"
  references: null
  notes: >
    v1 migration: Was internet.uri. More permissive than URL — accepts mailto:,
    urn:, and other schemes.

technology.internet.hostname:
  title: "Hostname"
  description: >
    Fully qualified domain name or simple hostname. Does not include protocol or path.
    Allows alphanumeric characters, hyphens, and dots. Subdomains supported.
  designation: universal
  locales: [UNIVERSAL]
  broad_type: VARCHAR
  format_string: null
  transform: "CAST({col} AS VARCHAR)"
  transform_ext: null
  decompose: null
  validation:
    type: string
    pattern: "^(?:(?:[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?\\.)*[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)$"
  tier: [VARCHAR, internet]
  release_priority: 4
  aliases: [domain_name]
  samples:
    - "example.com"
    - "www.google.com"
    - "subdomain.example.org"
    - "localhost"
  references: null
  notes: >
    v1 migration: Was internet.hostname. Pattern requires lowercase (use LOWER()
    to normalize). Does not validate DNS resolution.

technology.internet.port:
  title: "Port Number"
  description: >
    TCP/UDP port number (0-65535). When inferred from VARCHAR, transforms to SMALLINT.
  designation: universal
  locales: [UNIVERSAL]
  broad_type: SMALLINT
  format_string: null
  transform: "CAST({col} AS SMALLINT)"
  transform_ext: null
  decompose: null
  validation:
    type: string
    pattern: "^([0-9]{1,5})$"
    minimum: 0
    maximum: 65535
  tier: [SMALLINT, internet]
  release_priority: 4
  aliases: null
  samples:
    - "80"
    - "443"
    - "8080"
    - "3306"
  references: null
  notes: >
    v1 migration: Was internet.port. Validates numeric range 0-65535.
    Common ports: 80 (HTTP), 443 (HTTPS), 22 (SSH), 3306 (MySQL), 5432 (PostgreSQL).

technology.internet.top_level_domain:
  title: "Top-Level Domain (TLD)"
  description: >
    Domain extension (e.g., .com, .org, .uk). May include second-level domains
    for country codes (e.g., .co.uk). Does not include the dot.
  designation: universal
  locales: [UNIVERSAL]
  broad_type: VARCHAR
  format_string: null
  transform: "CAST({col} AS VARCHAR)"
  transform_ext: null
  decompose: null
  validation:
    type: string
    pattern: "^(?:[a-z]{2,}|xn--[a-z0-9]+)(?:\\.[a-z]{2,})?$"
  tier: [VARCHAR, internet]
  release_priority: 4
  aliases: [tld]
  samples:
    - "com"
    - "org"
    - "uk"
    - "co.uk"
    - "xn--3e0b707e"
  references: null
  notes: >
    v1 migration: Was internet.tld (aliased to top_level_domain for clarity).
    Pattern allows IDN (xn--) format.

technology.internet.slug:
  title: "URL Slug"
  description: >
    URL-friendly string for use in paths. Only lowercase alphanumerics,
    hyphens, and underscores. Common in blogs and content management systems.
  designation: universal
  locales: [UNIVERSAL]
  broad_type: VARCHAR
  format_string: null
  transform: "CAST({col} AS VARCHAR)"
  transform_ext: null
  decompose: null
  validation:
    type: string
    pattern: "^[a-z0-9]+(?:[-_][a-z0-9]+)*$"
  tier: [VARCHAR, internet]
  release_priority: 3
  aliases: [slug]
  samples:
    - "my-blog-post"
    - "product_name_123"
    - "hello-world"
  references: null
  notes: >
    v1 migration: Was internet.slug. Patterns like "word-separated" or
    "word_separated". Typically lowercase.

technology.internet.user_agent:
  title: "User Agent String"
  description: >
    HTTP User-Agent header string identifying the client application.
    Typically contains browser, OS, and version information.
  designation: universal
  locales: [UNIVERSAL]
  broad_type: VARCHAR
  format_string: null
  transform: "CAST({col} AS VARCHAR)"
  transform_ext: null
  decompose: null
  validation:
    type: string
    minLength: 10
    maxLength: 500
  tier: [VARCHAR, internet]
  release_priority: 3
  aliases: null
  samples:
    - "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36"
    - "Mozilla/5.0 (iPhone; CPU iPhone OS 15_0 like Mac OS X)"
    - "curl/7.64.1"
  references: null
  notes: >
    v1 migration: Was internet.user_agent. No strict regex — validation is
    simple length check. Parse with dedicated UA parser for details.

technology.internet.http_method:
  title: "HTTP Method"
  description: >
    HTTP request method (GET, POST, PUT, DELETE, PATCH, HEAD, OPTIONS, TRACE, CONNECT).
    Broad categorization; lower release priority.
  designation: broad_words
  locales: [UNIVERSAL]
  broad_type: VARCHAR
  format_string: null
  transform: "CAST({col} AS VARCHAR)"
  transform_ext: null
  decompose: null
  validation:
    type: string
    enum: [GET, POST, PUT, DELETE, PATCH, HEAD, OPTIONS, TRACE, CONNECT]
  tier: [VARCHAR, internet]
  release_priority: 1
  aliases: null
  samples:
    - "GET"
    - "POST"
    - "DELETE"
  references: null
  notes: >
    v1 migration: Was internet.http_method marked broad_words. Lower priority
    due to high cardinality but limited semantic information.

technology.internet.http_status_code:
  title: "HTTP Status Code"
  description: >
    HTTP response status code (100-599). Numeric string or integer.
    When inferred as VARCHAR, transforms to SMALLINT.
  designation: universal
  locales: [UNIVERSAL]
  broad_type: SMALLINT
  format_string: null
  transform: "CAST({col} AS SMALLINT)"
  transform_ext: null
  decompose: null
  validation:
    type: string
    pattern: "^([1-5][0-9]{2})$"
  tier: [SMALLINT, internet]
  release_priority: 4
  aliases: [http_status]
  samples:
    - "200"
    - "404"
    - "500"
    - "301"
  references: null
  notes: >
    v1 migration: Was internet.http_status_code. Valid range: 100-599.

# ═════════════════════════════════════════════════════════════════════
# CATEGORY: cryptographic
#
# Hash functions, tokens, and cryptographic identifiers.
# These are deterministic outputs of cryptographic algorithms or
# random tokens used for security purposes.
# ═════════════════════════════════════════════════════════════════════

technology.cryptographic.uuid:
  title: "UUID"
  description: >
    Universally Unique Identifier (RFC 4122). Standard formats include
    UUID v1 (timestamp-based), v4 (random), and v5 (name-based).
    Canonical format: 8-4-4-4-12 hex groups with hyphens.
  designation: universal
  locales: [UNIVERSAL]
  broad_type: UUID
  format_string: null
  transform: "CAST({col} AS UUID)"
  transform_ext: null
  decompose: null
  validation:
    type: string
    pattern: "^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$"
  tier: [UUID, cryptographic]
  release_priority: 5
  aliases: [guid]
  samples:
    - "550e8400-e29b-41d4-a716-446655440000"
    - "6ba7b810-9dad-11d1-80b4-00c04fd430c8"
    - "f47ac10b-58cc-4372-a567-0e02b2c3d479"
  references: null
  notes: >
    v1 migration: Was cryptographic.uuid. DuckDB UUID type accepts standard
    8-4-4-4-12 format. Also accepts without hyphens via UPPER() or normalization.

technology.cryptographic.hash:
  title: "Cryptographic Hash"
  description: >
    Output of a cryptographic hash function (MD5, SHA-1, SHA-256, etc.).
    Detected as hex string of fixed length. Broad categorization by length.
  designation: universal
  locales: [UNIVERSAL]
  broad_type: VARCHAR
  format_string: null
  transform: "CAST({col} AS VARCHAR)"
  transform_ext: null
  decompose:
    algorithm: "CASE WHEN LENGTH({col}) = 32 THEN 'MD5' WHEN LENGTH({col}) = 40 THEN 'SHA1' WHEN LENGTH({col}) = 64 THEN 'SHA256' WHEN LENGTH({col}) = 128 THEN 'SHA512' ELSE 'UNKNOWN' END"
  validation:
    type: string
    pattern: "^[0-9a-f]{32}$|^[0-9a-f]{40}$|^[0-9a-f]{64}$|^[0-9a-f]{128}$"
  tier: [VARCHAR, cryptographic]
  release_priority: 4
  aliases: null
  samples:
    - "5d41402abc4b2a76b9719d911017c592"
    - "aaf4c61ddcc5e8a2dabede0f3b482cd9aea9434d"
    - "2c26b46911185131006dfb3b57a99d73"
  references: null
  notes: >
    v1 migration: Was cryptographic.hash. Decompose infers algorithm from length:
    32→MD5, 40→SHA1, 64→SHA256, 128→SHA512. No cryptographic validation (can't
    verify true hash without known input).

technology.cryptographic.token_hex:
  title: "Hexadecimal Token"
  description: >
    Random token as hex string (e.g., secure session tokens).
    Distinguished from cryptographic hashes by variable length that does NOT
    match standard hash lengths (32=MD5, 40=SHA1, 64=SHA256, 128=SHA512).
    Tokens are typically 16-48 hex chars at non-standard lengths.
  designation: universal
  locales: [UNIVERSAL]
  broad_type: VARCHAR
  format_string: null
  transform: "CAST({col} AS VARCHAR)"
  transform_ext: null
  decompose: null
  validation:
    type: string
    pattern: "^[0-9a-f]{16,48}$"
  tier: [VARCHAR, cryptographic]
  release_priority: 3
  aliases: [hex_token]
  samples:
    - "a1b2c3d4e5f67890ab"
    - "1234567890abcdef1234"
    - "deadbeefcafebabe00ff11"
  references: null
  notes: >
    v1 migration: Was cryptographic.token_hex. Typically 16-48 hex characters
    (8-24 bytes). Used for session IDs, API tokens, etc. Distinguished from
    hashes by avoiding standard hash lengths: 32 (MD5), 40 (SHA1), 64 (SHA256),
    128 (SHA512). Generator produces lengths that exclude these values.

technology.cryptographic.token_urlsafe:
  title: "URL-Safe Base64 Token"
  description: >
    Random token encoded in URL-safe Base64 (uses - and _ instead of + and /).
    Commonly used for auth tokens, reset links, and secure identifiers.
  designation: universal
  locales: [UNIVERSAL]
  broad_type: VARCHAR
  format_string: null
  transform: "CAST({col} AS VARCHAR)"
  transform_ext: null
  decompose: null
  validation:
    type: string
    pattern: "^[A-Za-z0-9_-]{12,128}$"
  tier: [VARCHAR, cryptographic]
  release_priority: 3
  aliases: [urlsafe_token]
  samples:
    - "SFMyNDI5STExOjEwMQ"
    - "dGVzdC10b2tlbg"
    - "aGVsbG8td29ybGQ"
  references: null
  notes: >
    v1 migration: Was cryptographic.token_urlsafe. URL-safe Base64 avoids
    characters that need escaping in URLs. Length typically 12-128 chars.

# ═════════════════════════════════════════════════════════════════════
# CATEGORY: code
#
# Standardized codes and product identifiers (ISBN, IMEI, EAN, etc.).
# These have formal specifications and may include check digits.
# ═════════════════════════════════════════════════════════════════════

technology.code.isbn:
  title: "ISBN"
  description: >
    International Standard Book Number. ISBN-10 (10 digits with check digit)
    or ISBN-13 (13 digits with check digit). Also accepts with hyphens.
  designation: universal
  locales: [UNIVERSAL]
  broad_type: VARCHAR
  format_string: null
  transform: "CAST({col} AS VARCHAR)"
  transform_ext: null
  decompose:
    isbn_version: "CASE WHEN LENGTH(REGEXP_REPLACE({col}, '-', '')) = 10 THEN 'ISBN-10' ELSE 'ISBN-13' END"
  validation:
    type: string
    pattern: "^(?:97[89]-)?[0-9]{1,5}-[0-9]+-[0-9]+-[0-9X]$|^[0-9]{10}$|^[0-9]{13}$"
  tier: [VARCHAR, code]
  release_priority: 3
  aliases: null
  samples:
    - "978-0-13-110362-7"
    - "0-13-110362-9"
    - "9780131103627"
  references: null
  notes: >
    v1 migration: Was code.isbn. Pattern accepts ISBN-10 and ISBN-13 with or
    without hyphens. Decompose infers version based on length. Check digit
    validation should be done in application code, not in SQL.

technology.code.imei:
  title: "IMEI"
  description: >
    International Mobile Equipment Identity. 15-digit identifier for mobile devices.
    Last digit is a check digit (Luhn algorithm).
  designation: universal
  locales: [UNIVERSAL]
  broad_type: VARCHAR
  format_string: null
  transform: "CAST({col} AS VARCHAR)"
  transform_ext: null
  decompose: null
  validation:
    type: string
    pattern: "^[0-9]{15}$"
  tier: [VARCHAR, code]
  release_priority: 3
  aliases: null
  samples:
    - "490154203237518"
    - "352043068649149"
    - "010000862422488"
  references: null
  notes: >
    v1 migration: Was code.imei. 15 numeric digits. Check digit (last digit)
    uses Luhn algorithm but validation is done via crate, not regex.

technology.code.ean:
  title: "EAN"
  description: >
    European Article Number (also called Universal Product Code / UPC).
    Standard versions: EAN-8 (8 digits) and EAN-13 (13 digits).
    Last digit is check digit.
  designation: universal
  locales: [UNIVERSAL]
  broad_type: VARCHAR
  format_string: null
  transform: "CAST({col} AS VARCHAR)"
  transform_ext: null
  decompose:
    ean_version: "CASE WHEN LENGTH({col}) = 8 THEN 'EAN-8' WHEN LENGTH({col}) = 13 THEN 'EAN-13' ELSE 'UNKNOWN' END"
  validation:
    type: string
    pattern: "^[0-9]{8}$|^[0-9]{13}$"
  tier: [VARCHAR, code]
  release_priority: 3
  aliases: [upc]
  samples:
    - "5901234123457"
    - "96385074"
    - "4006381333931"
  references: null
  notes: >
    v1 migration: Was code.ean. EAN-13 is most common. EAN-8 used for small
    packages. Check digit via Luhn algorithm (validated in crate).

technology.code.issn:
  title: "ISSN"
  description: >
    International Standard Serial Number. 8-digit identifier for periodicals
    (magazines, journals, newspapers). Format: XXXX-XXXX. Last digit is check character.
  designation: universal
  locales: [UNIVERSAL]
  broad_type: VARCHAR
  format_string: null
  transform: "CAST({col} AS VARCHAR)"
  transform_ext: null
  decompose: null
  validation:
    type: string
    pattern: "^[0-9]{4}-[0-9]{3}[0-9X]$"
  tier: [VARCHAR, code]
  release_priority: 3
  aliases: null
  samples:
    - "0028-0836"
    - "1234-567X"
    - "0003-7516"
  references: null
  notes: >
    v1 migration: Was code.issn. 8 characters including hyphens: XXXX-XXXX.
    Last character can be digit or X (for check digit 10).

technology.code.doi:
  title: "DOI"
  description: >
    Digital Object Identifier — a persistent identifier for digital content
    (journal articles, datasets, books). Format: 10.XXXX/suffix where XXXX
    is a registrant code and suffix is assigned by the registrant.
  designation: universal
  locales: [UNIVERSAL]
  broad_type: VARCHAR
  format_string: null
  transform: "CAST({col} AS VARCHAR)"
  transform_ext: null
  decompose:
    registrant: "REGEXP_EXTRACT({col}, '^10\\.([0-9]+)/')"
    suffix: "REGEXP_EXTRACT({col}, '^10\\.[0-9]+/(.*)')"
  validation:
    type: string
    pattern: "^10\\.[0-9]{4,9}/[^\\s]+$"
  tier: [VARCHAR, code]
  release_priority: 3
  aliases: null
  samples:
    - "10.1038/nature12373"
    - "10.1000/xyz123"
    - "10.1016/j.cell.2009.01.043"
    - "10.48550/arXiv.2301.07041"
  references: null
  notes: >
    New in v2. DOI prefix always starts with "10." followed by registrant
    code (4-9 digits), then "/" and a suffix. Common registrants include
    10.1038 (Nature), 10.1016 (Elsevier), 10.1126 (Science), 10.1145 (ACM),
    10.48550 (arXiv). Suffix may contain dots, hyphens, slashes.

technology.code.locale_code:
  title: "Locale Code"
  description: >
    Language-region code in IETF BCP 47 format (e.g., en-US, fr-FR, zh-Hans).
    Allows for script subtags (e.g., zh-Hant) and extensions.
  designation: universal
  locales: [UNIVERSAL]
  broad_type: VARCHAR
  format_string: null
  transform: "CAST({col} AS VARCHAR)"
  transform_ext: null
  decompose:
    language: "REGEXP_EXTRACT(LOWER({col}), '^([a-z]{2,3})')"
    country: "REGEXP_EXTRACT(LOWER({col}), '-([a-z]{2})(?:$|-)')"
  validation:
    type: string
    pattern: "^[a-zA-Z]{2,3}(?:[-_][a-zA-Z]{2,4})*$"
  tier: [VARCHAR, code]
  release_priority: 4
  aliases: null
  samples:
    - "en"
    - "en-US"
    - "fr-FR"
    - "zh-Hans-CN"
    - "de-AT"
  references: null
  notes: >
    v1 migration: Was code.locale_code. IETF BCP 47 format. Common codes:
    en, en-US, fr, de, zh-Hans, zh-Hant. Decompose extracts language and country.

technology.code.pin:
  title: "PIN"
  description: >
    Personal Identification Number. Typically 4-8 digits. Often numeric but
    may include alphanumeric in some systems. Broad categorization.
  designation: broad_numbers
  locales: [UNIVERSAL]
  broad_type: VARCHAR
  format_string: null
  transform: "CAST({col} AS VARCHAR)"
  transform_ext: null
  decompose: null
  validation:
    type: string
    pattern: "^[0-9]{4,8}$"
  tier: [VARCHAR, code]
  release_priority: 1
  aliases: null
  samples:
    - "1234"
    - "987654"
    - "0000"
  references: null
  notes: >
    v1 migration: Was code.pin marked broad_numbers. Marked as broad_ due to
    high variance in PIN length and format across different systems.

# ═════════════════════════════════════════════════════════════════════
# CATEGORY: development
#
# Software versioning, build metadata, programming concepts.
# These describe the tools, languages, and lifecycle of software.
# ═════════════════════════════════════════════════════════════════════

technology.development.version:
  title: "Version Number"
  description: >
    Software or document version in semantic versioning format (e.g., 1.2.3)
    or variant formats (e.g., v1.2.3, 1.2.3-alpha, 1.2.3+build).
    Resolves to VARCHAR.
  designation: universal
  locales: [UNIVERSAL]
  broad_type: VARCHAR
  format_string: null
  transform: "CAST({col} AS VARCHAR)"
  transform_ext: null
  decompose:
    major: "CAST(REGEXP_EXTRACT({col}, '^v?([0-9]+)') AS SMALLINT)"
    minor: "CAST(REGEXP_EXTRACT({col}, '^\\.([0-9]+)') AS SMALLINT)"
    patch: "CAST(REGEXP_EXTRACT({col}, '^\\.([0-9]+)(?:-|\\+|$)') AS SMALLINT)"
    prerelease: "REGEXP_EXTRACT({col}, '-([a-zA-Z0-9.]+)(?:\\+|$)')"
    metadata: "REGEXP_EXTRACT({col}, '\\+([a-zA-Z0-9.]+)$')"
  validation:
    type: string
    pattern: "^v?[0-9]+\\.[0-9]+\\.[0-9]+(?:-[a-zA-Z0-9.]+)?(?:\\+[a-zA-Z0-9.]+)?$"
  tier: [VARCHAR, development]
  release_priority: 4
  aliases: null
  samples:
    - "1.2.3"
    - "v1.2.3"
    - "1.2.3-alpha"
    - "1.2.3-beta.1"
    - "1.2.3+build.123"
  references: null
  notes: >
    v1 migration: Was development.version. Semantic versioning (MAJOR.MINOR.PATCH).
    Decompose extracts major, minor, patch, prerelease, and metadata components.

technology.development.calver:
  title: "Calendar Version"
  description: >
    Calendar versioning (CalVer) following date-based patterns like YYYY.MM.DD
    or YYYY.MM. Used by projects that version based on release calendar.
  designation: universal
  locales: [UNIVERSAL]
  broad_type: VARCHAR
  format_string: null
  transform: "CAST({col} AS VARCHAR)"
  transform_ext: null
  decompose:
    year: "CAST(REGEXP_EXTRACT({col}, '^([0-9]{4})') AS SMALLINT)"
    month: "CAST(REGEXP_EXTRACT({col}, '^[0-9]{4}\\.([0-9]{2})') AS SMALLINT)"
    day: "CAST(REGEXP_EXTRACT({col}, '^[0-9]{4}\\.[0-9]{2}\\.([0-9]{2})') AS SMALLINT)"
  validation:
    type: string
    pattern: "^[0-9]{4}\\.[0-9]{2}(?:\\.[0-9]{2})?(?:\\..*)?$"
  tier: [VARCHAR, development]
  release_priority: 3
  aliases: null
  samples:
    - "2024.02"
    - "2024.02.09"
    - "2023.12.31"
    - "2024.01.15.1"
  references: null
  notes: >
    v1 migration: Was development.calver. Decompose extracts year, month, day.
    Format: YYYY.MM or YYYY.MM.DD.

technology.development.programming_language:
  title: "Programming Language"
  description: >
    Name of a programming language (Python, JavaScript, Go, Rust, etc.).
    Broad categorization; lower release priority due to high variance in naming.
  designation: broad_words
  locales: [UNIVERSAL]
  broad_type: VARCHAR
  format_string: null
  transform: "CAST(LOWER({col}) AS VARCHAR)"
  transform_ext: null
  decompose: null
  validation:
    type: string
    enum:
      - python
      - javascript
      - typescript
      - java
      - cpp
      - csharp
      - go
      - rust
      - php
      - ruby
      - kotlin
      - swift
      - clojure
      - elixir
      - erlang
      - scala
      - haskell
      - r
      - julia
      - matlab
  tier: [VARCHAR, development]
  release_priority: 1
  aliases: null
  samples:
    - "Python"
    - "JavaScript"
    - "Go"
    - "Rust"
  references: null
  notes: >
    v1 migration: Was development.programming_language marked broad_words.
    Transform lowercases the value. Enum includes common languages.

technology.development.software_license:
  title: "Software License"
  description: >
    Open source or proprietary software license name (MIT, Apache 2.0, GPL, etc.).
    Broad categorization due to variants and naming inconsistencies.
  designation: broad_words
  locales: [UNIVERSAL]
  broad_type: VARCHAR
  format_string: null
  transform: "CAST(UPPER({col}) AS VARCHAR)"
  transform_ext: null
  decompose: null
  validation:
    type: string
    enum:
      - MIT
      - APACHE-2.0
      - GPL-2.0
      - GPL-3.0
      - AGPL-3.0
      - BSD-2-CLAUSE
      - BSD-3-CLAUSE
      - ISC
      - MPL-2.0
      - LGPL-2.1
      - LGPL-3.0
      - UNLICENSE
      - PROPRIETARY
  tier: [VARCHAR, development]
  release_priority: 1
  aliases: null
  samples:
    - "MIT"
    - "Apache 2.0"
    - "GPL-3.0"
    - "BSD-3-Clause"
  references: null
  notes: >
    v1 migration: Was development.software_license marked broad_words.
    Transform uppercases. Enum includes SPDX identifiers.

technology.development.stage:
  title: "Development Stage"
  description: >
    Software development lifecycle stage (alpha, beta, release, deprecated, etc.).
    Broad categorization.
  designation: broad_words
  locales: [UNIVERSAL]
  broad_type: VARCHAR
  format_string: null
  transform: "CAST(LOWER({col}) AS VARCHAR)"
  transform_ext: null
  decompose: null
  validation:
    type: string
    enum:
      - alpha
      - beta
      - release_candidate
      - released
      - stable
      - deprecated
      - archived
  tier: [VARCHAR, development]
  release_priority: 1
  aliases: null
  samples:
    - "Alpha"
    - "Beta"
    - "Released"
    - "Stable"
  references: null
  notes: >
    v1 migration: Was development.stage marked broad_words. Transform lowercases.

technology.development.os:
  title: "Operating System"
  description: >
    Operating system name (Windows, macOS, Linux, iOS, Android, etc.).
    Broad categorization.
  designation: broad_words
  locales: [UNIVERSAL]
  broad_type: VARCHAR
  format_string: null
  transform: "CAST({col} AS VARCHAR)"
  transform_ext: null
  decompose: null
  validation:
    type: string
    enum:
      - Windows
      - macOS
      - Linux
      - iOS
      - Android
      - FreeBSD
  tier: [VARCHAR, development]
  release_priority: 1
  aliases: null
  samples:
    - "Windows"
    - "macOS"
    - "Linux"
    - "iOS"
  references: null
  notes: >
    v1 migration: Was development.os marked broad_words. Values typically
    follow consistent capitalization (Windows, macOS, Linux, etc.).

technology.development.boolean:
  title: "Boolean Value"
  description: >
    Logical true/false value represented as a string. Common representations:
    "true"/"false", "yes"/"no", "1"/"0", "on"/"off".
    Transforms to DuckDB BOOLEAN type.
  designation: universal
  locales: [UNIVERSAL]
  broad_type: BOOLEAN
  format_string: null
  transform: "CAST({col} AS BOOLEAN)"
  transform_ext: null
  decompose: null
  validation:
    type: string
    enum: ["true", "false", "yes", "no", "1", "0", "on", "off", "True", "False", "YES", "NO", "ON", "OFF"]
  tier: [BOOLEAN, development]
  release_priority: 5
  aliases: [bool]
  samples:
    - "true"
    - "false"
    - "yes"
    - "no"
    - "1"
    - "0"
  references: null
  notes: >
    v1 migration: Was development.boolean. DuckDB BOOLEAN type accepts
    true, false, 1, 0, yes, no, on, off (case-insensitive).

# ═════════════════════════════════════════════════════════════════════
# CATEGORY: hardware
#
# Hardware specifications and device information (CPU, RAM, screen size, etc.).
# These are system/device descriptions typically found in metadata or specs.
# ═════════════════════════════════════════════════════════════════════

technology.hardware.cpu:
  title: "CPU Model"
  description: >
    CPU processor name/model (e.g., Intel Core i7-11700K, AMD Ryzen 5 5600X).
    Broad categorization due to name variety.
  designation: broad_words
  locales: [UNIVERSAL]
  broad_type: VARCHAR
  format_string: null
  transform: "CAST({col} AS VARCHAR)"
  transform_ext: null
  decompose:
    manufacturer: "CASE WHEN {col} LIKE 'Intel%' THEN 'Intel' WHEN {col} LIKE 'AMD%' THEN 'AMD' ELSE 'Other' END"
  validation:
    type: string
    minLength: 5
    maxLength: 100
  tier: [VARCHAR, hardware]
  release_priority: 1
  aliases: [processor]
  samples:
    - "Intel Core i7-11700K"
    - "AMD Ryzen 5 5600X"
    - "Apple M1"
    - "Qualcomm Snapdragon 888"
  references: null
  notes: >
    v1 migration: Was hardware.cpu marked broad_words. Decompose infers
    manufacturer. No strict validation beyond length.

technology.hardware.ram_size:
  title: "RAM Size"
  description: >
    Memory (RAM) capacity with unit (e.g., 16GB, 8192MB, 32 GB).
    Transforms to BIGINT (bytes) when specified with unit.
  designation: universal
  locales: [UNIVERSAL]
  broad_type: BIGINT
  format_string: null
  transform: >
    CASE
      WHEN UPPER({col}) LIKE '%GB%' THEN CAST(REGEXP_EXTRACT({col}, '^([0-9.]+)') AS BIGINT) * 1024 * 1024 * 1024
      WHEN UPPER({col}) LIKE '%MB%' THEN CAST(REGEXP_EXTRACT({col}, '^([0-9.]+)') AS BIGINT) * 1024 * 1024
      WHEN UPPER({col}) LIKE '%KB%' THEN CAST(REGEXP_EXTRACT({col}, '^([0-9.]+)') AS BIGINT) * 1024
      ELSE CAST({col} AS BIGINT)
    END
  transform_ext: null
  decompose:
    size: "CAST(REGEXP_EXTRACT({col}, '^([0-9.]+)') AS DOUBLE)"
    unit: "UPPER(REGEXP_EXTRACT({col}, '([A-Z]+)$'))"
  validation:
    type: string
    pattern: "^[0-9]+(\\.[0-9]+)?\\s*(GB|MB|KB|TB)$"
  tier: [BIGINT, hardware]
  release_priority: 3
  aliases: [memory_size]
  samples:
    - "16GB"
    - "8192MB"
    - "32 GB"
    - "1TB"
  references: null
  notes: >
    v1 migration: Was hardware.ram_size. Transform converts to bytes. Decompose
    extracts size and unit separately.

technology.hardware.screen_size:
  title: "Screen Size"
  description: >
    Display size in inches or centimeters (e.g., 15.6", 27 inches, 24.0cm).
    Transforms to DOUBLE (inches). Decompose extracts size and unit.
  designation: universal
  locales: [UNIVERSAL]
  broad_type: DOUBLE
  format_string: null
  transform: >
    CASE
      WHEN UPPER({col}) LIKE '%CM%' THEN CAST(REGEXP_EXTRACT({col}, '^([0-9.]+)') AS DOUBLE) / 2.54
      ELSE CAST(REGEXP_EXTRACT({col}, '^([0-9.]+)') AS DOUBLE)
    END
  transform_ext: null
  decompose:
    size: "CAST(REGEXP_EXTRACT({col}, '^([0-9.]+)') AS DOUBLE)"
    unit: "UPPER(REGEXP_EXTRACT({col}, '(IN|CM|INCH|\"|\\'')$'))"
  validation:
    type: string
    pattern: "^[0-9]+(\\.[0-9]+)?\\s*(in|cm|inches|INCHES|CM|IN|\"|\\')?$"
  tier: [DOUBLE, hardware]
  release_priority: 3
  aliases: null
  samples:
    - "15.6 inches"
    - "27\""
    - "24.0cm"
    - "13.3in"
  references: null
  notes: >
    v1 migration: Was hardware.screen_size. Transform converts to inches.

technology.hardware.generation:
  title: "Hardware Generation"
  description: >
    Generation or revision number for hardware (e.g., "Gen 3", "11th Gen", "v2").
    Broad categorization.
  designation: broad_words
  locales: [UNIVERSAL]
  broad_type: VARCHAR
  format_string: null
  transform: "CAST({col} AS VARCHAR)"
  transform_ext: null
  decompose:
    generation_number: "CAST(REGEXP_EXTRACT({col}, '([0-9]+)') AS SMALLINT)"
  validation:
    type: string
    pattern: "^(?:[0-9]+(?:st|nd|rd|th)\\s+)?(?:Gen|Generation|Rev|Version|v)\\s*[0-9]*$"
  tier: [VARCHAR, hardware]
  release_priority: 1
  aliases: null
  samples:
    - "Gen 3"
    - "11th Gen"
    - "v2"
    - "Rev 4"
  references: null
  notes: >
    v1 migration: Was hardware.generation marked broad_words. Decompose extracts
    numeric generation number.

# ═════════════════════════════════════════════════════════════════════
# Note: file, code extensions, MIME types moved to 'representation' domain
# ═════════════════════════════════════════════════════════════════════
